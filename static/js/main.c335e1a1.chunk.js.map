{"version":3,"sources":["utils/styleUtils.js","components/Field.js","components/InfoBar.js","utils/gameEngine.js","components/Game.js","components/Rules.js","components/OnlineModal.js","components/Menu.js","components/Footer.js","App.js","serviceWorker.js","index.js"],"names":["resolveImagePath","state","path","Cell","img_path","this","props","alt","className","src","onClick","bind","h","w","React","Component","FieldRow","row","Array","size","keys","map","number","N","key","field","onCellClick","Field","fieldElement","sizeH","sizeW","TeamName","id","MoveDot","class","img","MovesBar","empty","n","MenuButton","clicked","pressed","setState","gameState","isGameEnded","history","length","onMenuClick","Hint","sl","stepsLeft","tm","toMove","winner","type","playerTeam","RollBackButton","shouldShow","onRollBack","ConnectionStatus","lightClassBackend","isBackendConnected","lightClassOpponent","backend","opponent","InfoBar","hw2Index","maxW","index2W","index","index2H","Math","floor","getAllNeibours","maxH","result","push","isActiveNow","seen","indexOf","neibIndex","some","x","isStepValid","cellState","neibours","getNextState","currentState","Game","setUpSocket","url","console","log","socket","WebSocket","onopen","onmessage","msg","handleReceivedMove","JSON","parse","data","onclose","code","timeouts","setTimeout","handleRollBack","slice","move","pop","currState","sign","abs","handleCellClick","makeStep","then","sendStateIfNeeded","fill","aiType","close","forEach","clearTimeout","Error","step","a","new_state","tmp_state","i","found","k","stepped_field","isValidMoveExists","Promise","resolve","aiMoves","onlineGame","send","stringify","Rules","onNext","currentSlide","Object","onPrev","1","imgSrc","element","2","3","4","5","disabled","onCloseClick","OnlineModal","EASY_AI_ENABLED","process","REACT_APP_EASY_AI_ENABLED","MEDIUM_AI_ENABLED","REACT_APP_MEDIUM_AI_ENABLED","HARD_AI_ENABLED","REACT_APP_HARD_AI_ENABLED","ReactModal","setAppElement","Menu","handleToggleRules","handleToggleOnline","showRules","showOnline","role","aria-label","onNavigationClick","isOpen","onRequestClose","overlayClassName","shouldFocusAfterRender","createRoom","joinRoom","Footer","href","App","handleNavigation","page","activePage","handleMenuClick","Boolean","window","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"2QAeeA,I,YAAAA,EAdf,SAA0BC,GACtB,IAAIC,EAAO,QACX,OAAQD,GACJ,KAAK,EAAGC,GAAQ,YAAa,MAC7B,KAAK,EAAGA,GAAQ,iBAAkB,MAClC,KAAK,EAAGA,GAAQ,eAAgB,MAChC,KAAM,EAAGA,GAAQ,gBAAiB,MAClC,KAAM,EAAGA,GAAQ,cAAe,MAChC,QAASA,GAAQ,YAGrB,OAAOA,G,OCTLC,E,4JACF,WACI,IAAMC,EAAWJ,EAAiBK,KAAKC,MAAML,OAC7C,OACI,qBAAKM,IAAI,OAAOC,UAAU,OAAOC,IAAKL,EACjCM,QAASL,KAAKC,MAAMI,QAAQC,KAAKN,KAAMA,KAAKC,MAAMM,EAAGP,KAAKC,MAAMO,S,GAL9DC,IAAMC,WASnBC,E,4JACF,WAAU,IAAD,OACCC,EAAM,YAAIC,MAAMb,KAAKC,MAAMa,MAAMC,QAAQC,KAAI,SAAAC,GAC/C,IAAMV,EAAI,EAAKN,MAAMiB,EACfV,EAAIS,EACJE,EAAMZ,EAAI,EAAKN,MAAMa,KAAON,EAC9BZ,EAAQ,EAAKK,MAAMmB,MAAMD,GAC7B,OAAO,cAAC,EAAD,CAAMZ,EAAGA,EAAGC,EAAGA,EACTH,QAAS,EAAKJ,MAAMoB,YACpBzB,MAAOA,GAFUuB,MAIlC,OACI,qBAAKhB,UAAU,YAAf,SACKS,Q,GAbMH,IAAMC,WAqCdY,E,4JAbX,WAAU,IAAD,OAKL,OAJAtB,KAAKuB,aAAe,YAAIV,MAAMb,KAAKC,MAAMuB,OAAOT,QAAQC,KAAI,SAAAC,GACxD,OAAO,cAAC,EAAD,CAAUH,KAAM,EAAKb,MAAMwB,MAAOP,EAAGD,EAC3BI,YAAa,EAAKpB,MAAMoB,YAAaD,MAAO,EAAKnB,MAAMmB,OADfH,MAIzD,qBAAKd,UAAU,aAAf,SACSH,KAAKuB,mB,GATNd,IAAMC,WC9BpBgB,E,4JACF,WACI,IAAMvB,EAAY,cAAkC,IAAlBH,KAAKC,MAAM0B,GAAW,YAAc,YACtE,OAAQ,sBAAMxB,UAAWA,EAAjB,SAA+C,IAAlBH,KAAKC,MAAM0B,GAAW,OAAS,Y,GAHrDlB,IAAMC,WAOvBkB,E,4JACF,WAEI,OACI,qBAAK1B,IAAI,OAAOC,UAAWH,KAAKC,MAAM4B,MAAOzB,IAAKJ,KAAKC,MAAM6B,U,GAJnDrB,IAAMC,WAStBqB,E,4JACF,WACI,IAAMhC,EAAWJ,EAAiBK,KAAKC,MAAM0B,IACvCK,EAAQrC,EAAiB,GACzBQ,EAAY,aAAiC,IAAlBH,KAAKC,MAAM0B,GAAW,YAAc,YAErE,OACI,gCAAK,cAAC,EAAD,CAASG,IAAK9B,KAAKC,MAAMgC,EAAI,EAAIlC,EAAWiC,EAAOH,MAAO1B,IAC3D,cAAC,EAAD,CAAS2B,IAAK9B,KAAKC,MAAMgC,EAAI,EAAIlC,EAAWiC,EAAOH,MAAO1B,IAC1D,cAAC,EAAD,CAAS2B,IAAK9B,KAAKC,MAAMgC,EAAI,EAAIlC,EAAWiC,EAAOH,MAAO1B,W,GATnDM,IAAMC,WAcvBwB,E,kDACF,WAAYjC,GAAQ,IAAD,8BACf,cAAMA,IACDL,MAAQ,CACTuC,SAAS,GAEb,EAAKC,QAAU,EAAKA,QAAQ9B,KAAb,gBALA,E,2CASnB,WACIN,KAAKqC,SAAS,CAACF,SAAUnC,KAAKJ,MAAMuC,Y,oBAGxC,WACI,OAAInC,KAAKC,MAAMqC,UAAUC,aAAuD,IAAxCvC,KAAKC,MAAMqC,UAAUE,QAAQC,OAE7D,8BACI,qBAAKtC,UAAU,uCAAuCE,QAASL,KAAKC,MAAMyC,YAA1E,oBAIR1C,KAAKJ,MAAMuC,QAEP,gCACI,qBAAKhC,UAAU,YAAf,gEACA,sBAAKA,UAAU,UAAf,UACA,sBAAMA,UAAU,8CACVE,QAASL,KAAKC,MAAMyC,YAD1B,iBAEI,sBAAMvC,UAAU,8CAA8CE,QAASL,KAAKoC,QAA5E,sBAOL,8BACH,qBAAKjC,UAAU,uCAAuCE,QAASL,KAAKoC,QAApE,wB,GArCS3B,IAAMC,WA2CzBiC,E,4JACF,WAEI,IAAMC,EAAK5C,KAAKC,MAAMqC,UAAUO,UAC1BC,EAAK9C,KAAKC,MAAMqC,UAAUS,OAChC,OAAI/C,KAAKC,MAAMqC,UAAUC,YACb,8BACA,sBAAKpC,UAAU,YAAf,kBAAgC,cAAC,EAAD,CAAUwB,GAAI3B,KAAKC,MAAMqC,UAAUU,SAAnE,aAIgB,YAApBhD,KAAKC,MAAMgD,MAAsBH,IAAO9C,KAAKC,MAAMqC,UAAUY,WACrD,gCACiB,YAApBlD,KAAKC,MAAMgD,KACR,sBAAK9C,UAAU,YAAf,UAA2B,cAAC,EAAD,CAAUwB,GAAI3B,KAAKC,MAAMqC,UAAUS,SAA9D,YAEA,qBAAK5C,UAAU,YAAf,2BAEJ,sBAAKA,UAAU,YAAf,cAA6ByC,EAA7B,QAA6C,IAAPA,EAAW,GAAK,IAAtD,WACA,qBAAKzC,UAAU,YAAf,SAA2B,cAAC,EAAD,CAAU8B,EAAGW,EAAIjB,GAAImB,SAI7C,qBAAK3C,UAAU,YAAf,6C,GAvBJM,IAAMC,WA+BnByC,E,4JACF,WACI,OAAInD,KAAKC,MAAMmD,WAEP,qBAAKjD,UAAU,uCAAuCE,QAASL,KAAKC,MAAMoD,WAA1E,sBAGD,4B,GAPc5C,IAAMC,WAW7B4C,E,4JACF,WACI,GAAwB,YAApBtD,KAAKC,MAAMgD,KACX,OAAO,wBAGX,IAAMM,EAAoBvD,KAAKC,MAAMuD,mBAAqB,QAAU,MAC9DC,EAAqBzD,KAAKC,MAAMuD,mBAAqB,QAAU,MAEjEE,EAAU,iCAAM,sBAChBvD,UAAWoD,EAAoB,SADrB,eAC2CvD,KAAKC,MAAMuD,mBAAqB,GAAK,OADhF,eAGVG,EAA+B,WAApB3D,KAAKC,MAAMgD,KACtB,iCAAM,sBACF9C,UAAWsD,EAAqB,QADpC,gBAC0DzD,KAAKC,MAAMuD,mBAAqB,GAAK,OAD/F,eAEA,yBAGJ,OACI,sBAAKrD,UAAU,oBAAf,UAAoCuD,EAASC,S,GAnB1BlD,IAAMC,WA2CtBkD,E,4JAhBX,WACI,OACI,gCACI,cAAC,EAAD,CAAkBJ,mBAAoBxD,KAAKC,MAAMqC,UAAUkB,mBAAoBP,KAAMjD,KAAKC,MAAMgD,OAChG,sBAAK9C,UAAU,oBAAf,UACI,cAAC,EAAD,CAAMmC,UAAWtC,KAAKC,MAAMqC,UAAWW,KAAMjD,KAAKC,MAAMgD,OACxD,cAAC,EAAD,CAAgBI,WAAYrD,KAAKC,MAAMoD,WAAYD,WAAgC,YAApBpD,KAAKC,MAAMgD,OAC1E,cAAC,EAAD,CAAYX,UAAWtC,KAAKC,MAAMqC,UAAWI,YAAa1C,KAAKC,MAAMyC,wB,GAVnEhC,aC/IlBmD,EAAW,SAAUtD,EAAGC,EAAGsD,GAC3B,OAAOvD,EAAIuD,EAAOtD,GAGlBuD,EAAU,SAAUC,EAAOF,GAC3B,OAAOE,EAAQF,GAGfG,EAAU,SAAUD,EAAOF,GAC3B,OAAOI,KAAKC,MAAMH,EAAQF,IAI1BM,EAAiB,SAAU7D,EAAGC,EAAG6D,EAAMP,GACvC,IAAIQ,EAAS,GA6Bb,OA5BI/D,EAAI,IACJ+D,EAAOC,KAAKV,EAAStD,EAAI,EAAGC,EAAGsD,IAC3BtD,EAAI,GACJ8D,EAAOC,KAAKV,EAAStD,EAAI,EAAGC,EAAI,EAAGsD,KAKvCvD,EAAI8D,EAAO,IACXC,EAAOC,KAAKV,EAAStD,EAAI,EAAGC,EAAGsD,IAC3BtD,EAAIsD,EAAO,GACXQ,EAAOC,KAAKV,EAAStD,EAAI,EAAGC,EAAI,EAAGsD,KAIvCtD,EAAI,IACJ8D,EAAOC,KAAKV,EAAStD,EAAGC,EAAI,EAAGsD,IAC3BvD,EAAI8D,EAAO,GACXC,EAAOC,KAAKV,EAAStD,EAAI,EAAGC,EAAI,EAAGsD,KAIvCtD,EAAIsD,EAAO,IACXQ,EAAOC,KAAKV,EAAStD,EAAGC,EAAI,EAAGsD,IAC3BvD,EAAI,GACJ+D,EAAOC,KAAKV,EAAStD,EAAI,EAAGC,EAAI,EAAGsD,KAGpCQ,GAGPE,EAAc,SAAdA,EAAwBjE,EAAGC,EAAGZ,EAAO6E,GACrC,IAAMT,EAAQH,EAAStD,EAAGC,EAAGZ,EAAM6B,OACnC,QAAIgD,EAAKC,QAAQV,IAAU,KAG3BS,EAAKF,KAAKP,GACNpE,EAAMwB,MAAM4C,KAAWpE,EAAMmD,QAG7BnD,EAAMwB,MAAM4C,KAA0B,EAAfpE,EAAMmD,QACtBqB,EAAe7D,EAAGC,EAAGZ,EAAM4B,MAAO5B,EAAM6B,OAAOT,KAClD,SAAC2D,GAAD,OACIH,EAAYP,EAAQU,EAAW/E,EAAM6B,OAAQsC,EAAQY,EAAW/E,EAAM6B,OAAQ7B,EAAO6E,MAAOG,MAChG,SAACC,GAAD,OAAOA,OAcbC,EAAc,SAAUlF,EAAOW,EAAGC,GACpC,GAT2BuE,EASPnF,EAAMwB,MAAMyC,EAAStD,EAAEC,EAAEZ,EAAM6B,QATbsB,EASsBnD,EAAMmD,OARjD,IAAdgC,GAGShC,KAAagC,EAMrB,OAAQ,EAVM,IAASA,EAAWhC,EAahCiC,EAAWZ,EAAe7D,EAAGC,EAAGZ,EAAM4B,MAAO5B,EAAM6B,OACrDgD,EAAO,GACX,OAAOO,EAAShE,KAAI,SAAC2D,GAAD,OAChBH,EAAYP,EAAQU,EAAW/E,EAAM6B,OAAQsC,EAAQY,EAAW/E,EAAM6B,OAAQ7B,EAAO6E,MAAOG,MACxF,SAACC,GAAD,OAAOA,MAIbI,EAAe,SAAUC,EAAcnC,GACzC,OAAqB,IAAjBmC,EACOnC,GAECmC,EAAenC,GC2HhBoC,E,kDA5MX,WAAYlF,GAAQ,IAAD,uBACf,cAAMA,IA8BVmF,YAAc,SAACC,GACXC,QAAQC,IAAI,6BACZ,EAAKC,OAAS,IAAIC,UAAUJ,GAC5B,EAAKG,OAAOE,OAAS,WACjB,EAAKrD,SAAS,CAACmB,oBAAoB,IACnC8B,QAAQC,IAAI,sBAEhB,EAAKC,OAAOG,UAAY,SAACC,GACrB,EAAKC,mBAAmBC,KAAKC,MAAMH,EAAII,QAE3C,EAAKR,OAAOS,QAAU,SAACL,GACnBN,QAAQC,IAAI,wCAAwCK,EAAIM,KAAO,4BAC/D,EAAK7D,SAAS,CAACmB,oBAAoB,IACnC,EAAK2C,SAAS5B,KAAK6B,YAAW,WAAK,EAAKhB,YAAYC,KAAO,QA5ChD,EAyEnBgB,eAAiB,WACb,GAAkC,IAA9B,EAAKzG,MAAM4C,QAAQC,QAAoC,YAApB,EAAKxC,MAAMgD,KAAlD,CAIA,IAAMT,EAAU,EAAK5C,MAAM4C,QAAQ8D,QAC7BlF,EAAQ,EAAKxB,MAAMwB,MAAMkF,QAC3BvD,EAAS,EAAKnD,MAAMmD,OACpBF,EAAY,EAAKjD,MAAMiD,UAAY,EACnCN,EAAc,EAAK3C,MAAM2C,YACzBS,EAAS,EAAKpD,MAAMoD,OAElBuD,EAAO/D,EAAQgE,MACfC,EAAYrF,EAAMmF,EAAK,GAAK,EAAK9E,MAAQ8E,EAAK,IAEpDnF,EAAMmF,EAAK,GAAK,EAAK9E,MAAQ8E,EAAK,KAAOrC,KAAKwC,KAAKD,IAAcvC,KAAKyC,IAAIF,GAAa,GAEnF5D,EAAY,IAEZE,GAAUA,EACVF,EAAY,EAERN,IACAA,GAAc,EACdS,EAAS,OAIjB,EAAKX,SAAS,CACVjB,MAAOA,EACP2B,OAAQA,EACRF,UAAWA,EACXL,QAASA,EACTD,YAAaA,EACbS,OAAQA,MA3GG,EA+GnB4D,gBAAkB,SAACrG,EAAGC,GACQ,EAAKZ,MAAMmD,SAAW,EAAKnD,MAAMsD,YAAkC,YAApB,EAAKjD,MAAMgD,MAC3D,EAAKrD,MAAM2C,cAAgBuC,EAAY,EAAKlF,MAAOW,EAAGC,IAG/E,EAAKqG,SAAStG,EAAGC,GAAGsG,KAAK,EAAKC,kBAAkBzG,KAAvB,kBAlHzB,EAAKkB,MAAQ,EACb,EAAKC,MAAQ,EACb,IAAIL,EAAQ,IAAIP,MAAM,EAAKW,MAAQ,EAAKC,OAAOuF,KAAK,GAJrC,OAKf5F,EAAM,GAAK,EACXA,EAAM,EAAKI,MAAQ,EAAKC,MAAQ,IAAM,EACtC,EAAK7B,MAAQ,CACTwB,MAAOA,EACP2B,OAAQ,EACRF,UAAW,EACXrB,MAAO,EAAKA,MACZC,MAAO,EAAKA,MACZe,QAAS,GACTD,aAAa,EACbS,OAAQ,KACRQ,oBAAoB,EACpBN,WAAY,GAEhB,EAAK0D,gBAAkB,EAAKA,gBAAgBtG,KAArB,gBACvB,EAAK+F,eAAiB,EAAKA,eAAe/F,KAApB,gBApBP,E,qDAuBnB,WAC4B,OAApBN,KAAKC,MAAMgD,MACXjD,KAAKoF,YAAY,+CAAgCpF,KAAKC,MAAMgH,OAAS,KAEzEjH,KAAKmG,SAAW,K,kCAqBpB,WACIb,QAAQC,IAAI,8BACRvF,KAAKwF,SAELxF,KAAKwF,OAAOS,QAAU,KACtBjG,KAAKwF,OAAO0B,SAEhBlH,KAAKmG,SAASgB,QAAQC,gB,gCAG1B,SAAmBpB,GAAO,IAAD,OACrB,GAAIhG,KAAKJ,MAAMmD,SAAW/C,KAAKJ,MAAMsD,aAAclD,KAAKJ,MAAM2C,YAA9D,CAGA,IAAIgE,EAAOP,EAAKO,KAChB,GAAIA,EAAK9D,OAASzC,KAAKJ,MAAMiD,UACzB,MAAM,IAAIwE,MAAM,4BAEpBd,EAAKY,QAAL,uCAAa,WAAOG,GAAP,SAAAC,EAAA,0DACLzC,EAAY,EAAKlF,MAAO0H,EAAK,GAAIA,EAAK,IADjC,gCAEC,EAAKT,SAASS,EAAK,GAAIA,EAAK,IAF7B,2CAAb,0D,sBAsDJ,SAAS/G,EAAGC,GAAI,IAAD,OACLY,EAAQpB,KAAKJ,MAAMwB,MAAMkF,QACzB9D,EAAUxC,KAAKJ,MAAM4C,QAAQ8D,QAC/BzD,EAAY7C,KAAKJ,MAAMiD,UAAY,EACnCE,EAAS/C,KAAKJ,MAAMmD,OAEpBC,EAAShD,KAAKJ,MAAMoD,OACpBT,EAAcvC,KAAKJ,MAAM2C,YAO7B,GAJAnB,EAAMb,EAAIP,KAAKyB,MAAQjB,GAAKyE,EAAa7D,EAAMb,EAAIP,KAAKyB,MAAQjB,GAAIR,KAAKJ,MAAMmD,QAC/EP,EAAQ+B,KAAK,CAAChE,EAAGC,IAGC,IAAdqC,EAAiB,CACjBE,GAAUA,EACVF,EAAY,EAGZ,IAAI2E,EAAS,eAAQxH,KAAKJ,OAC1B4H,EAAUpG,MAAQA,EAAMkF,QACxBkB,EAAUhF,QAAUA,EAAQ8D,QAC5BkB,EAAU3E,UAAYA,EACtB2E,EAAUzE,OAASA,ED1DJ,SAAUnD,GAEjC,IADA,IAAI6H,EAAS,eAAO7H,GACZ8H,EAAI,EAAGA,EAAE,EAAGA,IAAI,CAEpB,IADA,IAAIC,GAAQ,EACJC,EAAE,EAAGA,EAAEH,EAAUhG,MAAMgG,EAAUjG,MAAOoG,IAC5C,GAAI9C,EAAY2C,EAAWxD,EAAQ2D,EAAGH,EAAUhG,OAAOsC,EAAQ6D,EAAGH,EAAUhG,QAAQ,CAChFkG,GAAQ,EACR,IAAIE,EAAgBJ,EAAUrG,MAAMkF,QACpCuB,EAAcD,GAAK3C,EAAa4C,EAAcD,GAAIH,EAAU1E,QAC5D0E,EAAUrG,MAAQyG,EAClB,MAGR,IAAKF,EACD,OAAO,EAGf,OAAO,EC2CMG,CAAkBN,KAEnBjF,GAAc,EACdS,GAAWD,GAInB,OAAO,IAAIgF,SAAQ,SAACC,GAChB,EAAK3F,SAAS,CACVU,OAAQA,EACR3B,MAAOA,EACPyB,UAAWA,EACXL,QAASA,EACTD,YAAaA,EACbS,OAAQA,GACTgF,Q,+BAIX,WAAqB,IAAD,OAEVC,EAA8B,OAApBjI,KAAKC,MAAMgD,MAAiBjD,KAAKJ,MAAMsD,aAAelD,KAAKJ,MAAMmD,OAC3EmF,EAAiC,WAApBlI,KAAKC,MAAMgD,MACzBgF,IAAYjI,KAAKJ,MAAM2C,aAAgB2F,KACpClI,KAAKJ,MAAM4D,oBACXxD,KAAKwF,OAAO2C,KAAKrC,KAAKsC,UAAUpI,KAAKJ,QACrC0F,QAAQC,IAAI,gBAEZD,QAAQC,IAAI,2CACZvF,KAAKmG,SAAS5B,KAAK6B,YAAW,WAAK,EAAKW,sBAAsB,U,oBAK1E,WACI,OACI,qBAAK5G,UAAU,oCAAf,SAEI,sBAAKA,UAAU,mBAAf,UACI,qBAAKA,UAAU,sBAAf,SACI,qBAAKA,UAAU,6BAAf,SACI,cAAC,EAAD,CAAOqB,MAAOxB,KAAKwB,MAAOC,MAAOzB,KAAKyB,MAAOJ,YAAarB,KAAK4G,gBACxDxF,MAAOpB,KAAKJ,MAAMwB,YAGjC,qBAAKjB,UAAU,iBAAf,SACI,qBAAKA,UAAU,6BAAf,SACI,cAAC,EAAD,CAASuC,YAAa1C,KAAKC,MAAMyC,YAAaW,WAAYrD,KAAKqG,eACtD/D,UAAWtC,KAAKJ,MAAOqD,KAAMjD,KAAKC,MAAMgD,oB,GAnM1DxC,IAAMC,W,gBCiGV2H,E,kDApGX,WAAYpI,GAAQ,IAAD,8BACf,cAAMA,IAyDVqI,OAAS,WACD,EAAK1I,MAAM2I,eAAiBC,OAAOzH,KAAK,EAAKnB,MAAMoG,MAAMvD,QAG7D,EAAKJ,SAAS,CAACkG,aAAc,EAAK3I,MAAM2I,aAAe,KA9DxC,EAiEnBE,OAAS,WAC2B,IAA5B,EAAK7I,MAAM2I,cAGf,EAAKlG,SAAS,CAACkG,aAAc,EAAK3I,MAAM2I,aAAe,KAnEvD,EAAK3I,MAAQ,CACT2I,aAAc,EACdvC,KAAM,CACF0C,EAAG,CACCC,OAAQ,mBACRC,QAAS,qBAAKzI,UAAU,qBAAf,SACL,+BACI,kEACA,8HAKZ0I,EAAG,CACCF,OAAQ,mBACRC,QAAS,qBAAKzI,UAAU,qBAAf,SACL,+BACI,2FACA,mFAIZ2I,EAAG,CACCH,OAAQ,mBACRC,QAAS,qBAAKzI,UAAU,qBAAf,SACL,6BACI,iEAAmC,uCAAnC,mCAIZ4I,EAAG,CACCJ,OAAQ,mBACRC,QAAS,yBAASzI,UAAU,qBAAnB,SACL,+BACI,qGACA,+EAIZ6I,EAAG,CACCL,OAAQ,mBACRC,QAAS,qBAAKzI,UAAU,qBAAf,SACL,+BACI,qFACA,mGAQpB,EAAKmI,OAAS,EAAKA,OAAOhI,KAAZ,gBACd,EAAKmI,OAAS,EAAKA,OAAOnI,KAAZ,gBAvDC,E,0CAwEnB,WACI,OAAQ,gCACJ,qBAAKH,UAAU,wCAAf,mBACA,qBAAKA,UAAU,YAAf,SACI,sBAAKA,UAAU,UAAf,UACI,qBAAKA,UAAU,iCAAf,SACI,qBAAKC,IAAKJ,KAAKJ,MAAMoG,KAAKhG,KAAKJ,MAAM2I,cAAcI,OAAQzI,IAAI,kBAEnE,qBAAKC,UAAU,oBAAf,SACKH,KAAKJ,MAAMoG,KAAKhG,KAAKJ,MAAM2I,cAAcK,eAItD,qBAAKK,SAAUjJ,KAAKJ,MAAM2I,eAAiBC,OAAOzH,KAAKf,KAAKJ,MAAMoG,MAAMvD,OAChEtC,UAAU,yDACVE,QAASL,KAAKsI,OAFtB,mBAIA,qBAAKW,SAAsC,IAA5BjJ,KAAKJ,MAAM2I,aAClBpI,UAAU,yDACVE,QAASL,KAAKyI,OAFtB,uBAIA,qBAAKtI,UAAU,yDACPE,QAASL,KAAKC,MAAMiJ,aAD5B,0B,GA9FQzI,IAAMC,WC0BXyI,E,kDA1BX,WAAYlJ,GAAQ,uCACVA,G,0CAGV,WACI,OAAQ,qBAAKE,UAAU,YAAf,SACJ,sBAAKA,UAAU,mBAAf,UACI,qBAAKA,UAAU,iBAAf,SACI,qBAAKA,UAAU,6BAAf,2BAIJ,qBAAKA,UAAU,iBAAf,SAEI,qBAAKA,UAAU,6BAAf,kC,GAfMM,IAAMC,WCG1B0I,EAAe,oBAAGC,oOAAH,aAAG,EAAaC,iCAAhB,SACfC,EAAiB,oBAAGF,oOAAH,aAAG,EAAaG,mCAAhB,SACjBC,EAAe,oBAAGJ,oOAAH,aAAG,EAAaK,iCAAhB,SAErBC,IAAWC,cAAc,S,IAoGVC,E,kDAhGX,WAAY5J,GAAQ,IAAD,8BACf,cAAMA,IACD6J,kBAAoB,EAAKA,kBAAkBxJ,KAAvB,gBACzB,EAAKyJ,mBAAqB,EAAKA,mBAAmBzJ,KAAxB,gBAC1B,EAAKV,MAAQ,CACToK,WAAW,EACXC,YAAY,GAND,E,qDAUnB,WACIjK,KAAKqC,SAAS,CAAE2H,WAAYhK,KAAKJ,MAAMoK,c,gCAE3C,WACIhK,KAAKqC,SAAS,CAAE4H,YAAajK,KAAKJ,MAAMqK,e,oBAG5C,WACI,OAEI,sBAAK9J,UAAU,+BAAf,UACI,qBAAKA,UAAU,mBAAf,SACI,qBAAKA,UAAU,iBAAf,SACI,qBAAKA,UAAU,uBAAf,SACI,qBAAKA,UAAU,2CAAf,SACI,sBAAKA,UAAU,oBAAf,UACI,qBAAKA,UAAU,QAAf,4BACA,qBAAKA,UAAU,WAAf,0EAQpB,qBAAKA,UAAU,oBAAf,SACI,sBAAKA,UAAU,OAAf,UACI,qBAAKA,UAAU,kBAAf,SACI,0BAASA,UAAU,uCAAnB,UACI,qBAAKA,UAAU,oBAAf,SACI,qBAAKA,UAAU,QAAf,0BAEJ,sBAAKA,UAAU,sCAAsCE,QAASL,KAAK8J,kBAAnE,UAAsF,sBAAMI,KAAK,MAAMC,aAAW,OAA5B,0BAAtF,iBAIR,qBAAKhK,UAAU,kBAAf,SAEI,0BAASA,UAAU,wCAAnB,UACI,qBAAKA,UAAU,oBAAf,SACI,qBAAKA,UAAU,QAAf,4BAEFiJ,EAAkB,sBAAKjJ,UAAU,uCAAuCE,QAASL,KAAKC,MAAMmK,kBAAkB9J,KAAKN,KAAM,QAAvG,UAAgH,sBAAMkK,KAAK,MAAMC,aAAW,OAA5B,0BAAhH,WAA0K,wBAC5LZ,EAAoB,sBAAKpJ,UAAU,uCAAuCE,QAASL,KAAKC,MAAMmK,kBAAkB9J,KAAKN,KAAM,UAAvG,UAAmH,sBAAMkK,KAAK,MAAMC,aAAW,SAA5B,0BAAnH,aAAgL,wBACpMV,EAAkB,sBAAKtJ,UAAU,uCAAuCE,QAASL,KAAKC,MAAMmK,kBAAkB9J,KAAKN,KAAM,QAAvG,UAAiH,sBAAMkK,KAAK,MAAOC,aAAW,OAA7B,0BAAjH,UAA0K,wBAC3Lf,GAAoBG,GAAsBE,EAAiG,wBAA/E,sBAAKtJ,UAAU,QAAf,cAAwB,uBAAxB,sDAGvE,qBAAKA,UAAU,kBAAf,SAEI,0BAASA,UAAU,qCAAnB,UACI,qBAAKA,UAAU,oBAAf,SACI,qBAAKA,UAAU,QAAf,kCAEJ,sBAAKA,UAAU,oCAAoCE,QAASL,KAAKC,MAAMmK,kBAAkB9J,KAAKN,KAAM,WAApG,UAAgH,sBAAMkK,KAAK,MAAMC,aAAW,UAA5B,sCAAhH,8BAOhB,cAAC,IAAD,CACIE,OAAQrK,KAAKJ,MAAMoK,UACnBM,eAAgBtK,KAAK8J,kBACrB3J,UAAU,cACVoK,iBAAiB,UACjBC,wBAAwB,EAL5B,SAOI,cAAC,EAAD,CAAOtB,aAAclJ,KAAK8J,sBAG9B,cAAC,IAAD,CACIO,OAAQrK,KAAKJ,MAAMqK,WACnBK,eAAgBtK,KAAK+J,mBACrB5J,UAAU,cACVoK,iBAAiB,UACjBC,wBAAwB,EAL5B,SAOI,cAAC,EAAD,CAAatB,aAAclJ,KAAK+J,mBAAoBU,WAAYzK,KAAK+J,mBAAoBW,SAAU1K,KAAK+J,8B,GA1FzGtJ,IAAMC,WCmBViK,E,4JA1BX,WACI,OACI,wBAAQxK,UAAU,mBAAlB,SACI,sBAAKA,UAAU,4BAAf,UACI,4CACe,mBAAGyK,KAAK,wBAAR,6BADf,2BAEI,mBAAGA,KAAK,iDAAR,kBAFJ,eAIA,8BACI,mBAAGA,KAAK,8CAAR,6BADJ,MAEI,mBAAGA,KAAK,0CAAR,6BAFJ,MAGI,mBAAGA,KAAK,uCAAR,8C,GAbHnK,IAAMC,WCqDZmK,E,kDAhDX,WAAY5K,GAAQ,IAAD,8BACf,cAAMA,IAOV6K,iBAAmB,SAACC,GAChB,EAAK1I,SAAS,CAAC2I,WAAYD,KATZ,EAYnBE,gBAAkB,WACd,EAAK5I,SAAS,CAAC2I,WAAY,UAX3B,EAAKpL,MAAQ,CAACoL,WAAY,QAC1B,EAAKC,gBAAkB,EAAKA,gBAAgB3K,KAArB,gBACvB,EAAKwK,iBAAmB,EAAKA,iBAAiBxK,KAAtB,gBAJT,E,0CAgBnB,WACI,IACIsI,EACJ,OAFmB5I,KAAKJ,MAAMoL,YAG1B,IAAK,OACDpC,EAAU,cAAC,EAAD,CAAMwB,kBAAmBpK,KAAK8K,mBACxC,MACJ,IAAK,OACDlC,EAAU,cAAC,EAAD,CAAM3F,KAAK,KAAKgE,OAAO,OAAOvE,YAAa1C,KAAKiL,kBAC1D,MACJ,IAAK,SACDrC,EAAU,cAAC,EAAD,CAAM3F,KAAK,KAAKgE,OAAO,SAASvE,YAAa1C,KAAKiL,kBAC5D,MACJ,IAAK,OACDrC,EAAU,cAAC,EAAD,CAAM3F,KAAK,KAAKgE,OAAO,OAAOvE,YAAa1C,KAAKiL,kBAC1D,MACJ,IAAK,UACDrC,EAAU,cAAC,EAAD,CAAM3F,KAAK,UAAUP,YAAa1C,KAAKiL,kBACjD,MACJ,QACIrC,EAAU,cAAC,EAAD,CAAMwB,kBAAmBpK,KAAK8K,mBAGhD,OACI,gCACKlC,EACD,cAAC,EAAD,W,GA5CEnI,IAAMC,WCOJwK,QACW,cAA7BC,OAAOC,SAASC,UAEe,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAASC,MACvB,2DCZNC,IAASC,OAAO,cAAC,EAAD,IAASC,SAASC,eAAe,SD2H3C,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAM/E,MAAK,SAAAgF,GACjCA,EAAaC,kB","file":"static/js/main.c335e1a1.chunk.js","sourcesContent":["\nfunction resolveImagePath(state) {\n    let path = \"/img/\";\n    switch (state) {\n        case 0: path += \"empty.png\"; break;\n        case 1: path += \"blueActive.png\"; break;\n        case 2: path += \"blueBase.png\"; break;\n        case -1: path += \"redActive.png\"; break;\n        case -2: path += \"redBase.png\"; break;\n        default: path += \"empty.png\"; break;\n\n    }\n    return path;\n}\n\nexport default resolveImagePath","import React from \"react\";\nimport resolveImagePath from \"../utils/styleUtils\"\n\nclass Cell extends React.Component {\n    render() {\n        const img_path = resolveImagePath(this.props.state);\n        return (\n            <img alt=\"cell\" className=\"cell\" src={img_path}\n                 onClick={this.props.onClick.bind(this, this.props.h, this.props.w)}/>\n        )\n    }\n}\nclass FieldRow extends React.Component {\n    render() {\n        const row = [...Array(this.props.size).keys()].map(number => {\n            const h = this.props.N;\n            const w = number;\n            const key = h * this.props.size + w;\n            let state = this.props.field[key];\n            return <Cell h={h} w={w} key={key}\n                         onClick={this.props.onCellClick}\n                         state={state}/>\n        });\n        return (\n            <div className=\"field-row\">\n                {row}\n            </div>\n        );\n    }\n\n\n\n}\n\nclass Field extends React.Component {\n\n    render() {\n        this.fieldElement = [...Array(this.props.sizeH).keys()].map(number => {\n            return <FieldRow size={this.props.sizeW} N={number} key={number}\n                             onCellClick={this.props.onCellClick} field={this.props.field}/>\n        });\n        return (\n            <div className=\"game-field\">\n                    {this.fieldElement}\n            </div>\n        )\n    }\n}\n\nexport default Field\n\n","import React, {Component} from \"react\";\nimport resolveImagePath from \"../utils/styleUtils\";\n\n\nclass TeamName extends React.Component {\n    render() {\n        const className = \"team-name \" + (this.props.id === 1 ? \"blue-name\" : \"red-name\");\n        return (<span className={className}>{this.props.id === 1 ? \"Blue\" : \"Red\"}</span>)\n    }\n}\n\nclass MoveDot extends React.Component {\n    render() {\n\n        return (\n            <img alt=\"cell\" className={this.props.class} src={this.props.img}/>\n        )\n    }\n}\n\nclass MovesBar extends React.Component {\n    render() {\n        const img_path = resolveImagePath(this.props.id);\n        const empty = resolveImagePath(0);\n        const className = \"move-dot \" + (this.props.id === 1 ? \"blue-name\" : \"red-name\");\n\n        return (\n            <div><MoveDot img={this.props.n > 2 ? img_path : empty} class={className}/>\n                <MoveDot img={this.props.n > 1 ? img_path : empty} class={className}/>\n                <MoveDot img={this.props.n > 0 ? img_path : empty} class={className}/></div>\n        )\n    }\n}\n\nclass MenuButton extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            clicked: false,\n        };\n        this.pressed = this.pressed.bind(this);\n\n    }\n\n    pressed() {\n        this.setState({clicked: !this.state.clicked});\n    };\n\n    render() {\n        if (this.props.gameState.isGameEnded || this.props.gameState.history.length === 0) {\n            return (\n                <div>\n                    <div className=\"button sidebar-button button-on-info\" onClick={this.props.onMenuClick}>Menu</div>\n                </div>\n            )\n        }\n        if (this.state.clicked) {\n            return (\n                <div>\n                    <div className=\"info-line\">Your game would be lost You sure you want to exit?</div>\n                    <div className=\"columns\">\n                    <span className=\"column button sidebar-button button-on-info\"\n                          onClick={this.props.onMenuClick}>Yes</span>\n                        <span className=\"column button sidebar-button button-on-info\" onClick={this.pressed}>No</span>\n\n                    </div>\n\n                </div>\n            )\n        } else {\n            return <div>\n                <div className=\"button sidebar-button button-on-info\" onClick={this.pressed}>Menu</div>\n            </div>\n        }\n    }\n}\n\nclass Hint extends React.Component {\n    render() {\n\n        const sl = this.props.gameState.stepsLeft;\n        const tm = this.props.gameState.toMove;\n        if (this.props.gameState.isGameEnded) {\n            return (<div>\n                    <div className=\"info-line\">Team <TeamName id={this.props.gameState.winner}/> won!</div>\n                </div>\n            )\n        } else {\n            if (this.props.type === 'offline' || tm === this.props.gameState.playerTeam) {\n                return (<div>\n                    {this.props.type === 'offline' ?\n                        <div className=\"info-line\"><TeamName id={this.props.gameState.toMove}/> moves</div>\n                        :\n                        <div className=\"info-line\">It's our move</div>\n                    }\n                    <div className=\"info-line\"> {sl} step{sl === 1 ? '' : 's'} left</div>\n                    <div className=\"info-line\"><MovesBar n={sl} id={tm}/></div>\n                </div>)\n            } else {\n                // it's not offline game and our opponent is thinking now\n                return <div className=\"info-line\">Our opponent is thinking...</div>\n            }\n        }\n\n\n    }\n}\n\nclass RollBackButton extends React.Component {\n    render() {\n        if (this.props.shouldShow) {\n            return (\n                <div className=\"button sidebar-button button-on-info\" onClick={this.props.onRollBack}>TakeBack</div>\n            )\n        }\n        return <div/>\n    }\n}\n\nclass ConnectionStatus extends React.Component {\n    render() {\n        if (this.props.type === 'offline') {\n            return <div/>\n        }\n\n        const lightClassBackend = this.props.isBackendConnected ? 'green' : 'red';\n        const lightClassOpponent = this.props.isBackendConnected ? 'green' : 'red';\n\n        let backend = <span><span\n            className={lightClassBackend + ' dot'}/> backend is {this.props.isBackendConnected ? '' : 'not '}connected</span>\n\n        let opponent = this.props.type === 'online' ?\n            <span><span\n                className={lightClassOpponent + 'dot'}/> opponent is {this.props.isBackendConnected ? '' : 'not '}connected</span> :\n            <span/>;\n\n\n        return (\n            <div className=\"connection-status\">{backend}{opponent}</div>\n        )\n    }\n}\n\nclass InfoBar extends Component {\n\n\n    render() {\n        return (\n            <div>\n                <ConnectionStatus isBackendConnected={this.props.gameState.isBackendConnected} type={this.props.type}/>\n                <div className=\"has-text-centered\">\n                    <Hint gameState={this.props.gameState} type={this.props.type}/>\n                    <RollBackButton onRollBack={this.props.onRollBack} shouldShow={this.props.type === 'offline'}/>\n                    <MenuButton gameState={this.props.gameState} onMenuClick={this.props.onMenuClick}/>\n                </div>\n\n            </div>\n\n        )\n    }\n}\n\nexport default InfoBar;","let hw2Index = function (h, w, maxW) {\n    return h * maxW + w;\n};\n\nlet index2W = function (index, maxW) {\n    return index % maxW;\n};\n\nlet index2H = function (index, maxW) {\n    return Math.floor(index / maxW);\n};\n\n\nlet getAllNeibours = function (h, w, maxH, maxW) {\n    let result = [];\n    if (h > 0) {\n        result.push(hw2Index(h - 1, w, maxW));\n        if (w > 0) {\n            result.push(hw2Index(h - 1, w - 1, maxW))\n        }\n    }\n\n\n    if (h < maxH - 1) {\n        result.push(hw2Index(h + 1, w, maxW));\n        if (w < maxW - 1) {\n            result.push(hw2Index(h + 1, w + 1, maxW))\n        }\n    }\n\n    if (w > 0) {\n        result.push(hw2Index(h, w - 1, maxW));\n        if (h < maxH - 1) {\n            result.push(hw2Index(h + 1, w - 1, maxW))\n        }\n    }\n\n    if (w < maxW - 1) {\n        result.push(hw2Index(h, w + 1, maxW));\n        if (h > 0) {\n            result.push(hw2Index(h - 1, w + 1, maxW))\n        }\n    }\n    return result;\n};\n\nlet isActiveNow = function (h, w, state, seen) {\n    const index = hw2Index(h, w, state.sizeW);\n    if (seen.indexOf(index) > -1) {\n        return false;\n    }\n    seen.push(index);\n    if (state.field[index] === state.toMove) {\n        return true;\n    }\n    if (state.field[index] === state.toMove * 2) {\n        return getAllNeibours(h, w, state.sizeH, state.sizeW).map(\n            (neibIndex) =>\n                isActiveNow(index2H(neibIndex, state.sizeW), index2W(neibIndex, state.sizeW), state, seen)).some(\n            (x) => x);\n    }\n\n    return false;\n};\n\nlet isStepPossible =  function(cellState, toMove){\n    if(cellState === 0){\n        return true;\n    }else{\n        return (toMove ===  -cellState)\n    }\n};\n\nconst isStepValid = function (state, h, w) {\n    if (!isStepPossible(state.field[hw2Index(h,w,state.sizeW)], state.toMove)){\n        return  false;\n    }\n\n    const neibours = getAllNeibours(h, w, state.sizeH, state.sizeW);\n    let seen = [];\n    return neibours.map((neibIndex) =>\n        isActiveNow(index2H(neibIndex, state.sizeW), index2W(neibIndex, state.sizeW), state, seen)).some(\n            (x) => x);\n};\n\n\nconst getNextState = function (currentState, toMove) {\n    if (currentState === 0) {\n        return toMove;\n    } else {\n        return -currentState + toMove\n    }\n};\n\nconst isValidMoveExists  = function (state) {\n    let tmp_state = {...state};\n    for(let i = 0; i<3; i++){\n        let found = false;\n        for(let k=0; k<tmp_state.sizeW*tmp_state.sizeH; k++){\n            if (isStepValid(tmp_state, index2H(k, tmp_state.sizeW),index2W(k, tmp_state.sizeW))){\n                found = true;\n                let stepped_field = tmp_state.field.slice();\n                stepped_field[k] = getNextState(stepped_field[k], tmp_state.toMove);\n                tmp_state.field = stepped_field;\n                break;\n            }\n        }\n        if (!found){\n            return false\n        }\n    }\n    return true\n};\n\nexport {isStepValid, getNextState, isValidMoveExists};\n\n","import React from \"react\";\nimport Field from \"./Field\";\nimport InfoBar from \"./InfoBar\"\nimport {isStepValid, getNextState, isValidMoveExists} from \"../utils/gameEngine\";\n\nconst SERVER_URL = process.env.REACT_APP_SERVER_URL;\n\nclass Game extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.sizeH = 8;\n        this.sizeW = 8;\n        let field = new Array(this.sizeH * this.sizeW).fill(0);\n        field[0] = 1;\n        field[this.sizeH * this.sizeW - 1] = -1;\n        this.state = {\n            field: field,\n            toMove: 1,\n            stepsLeft: 2,\n            sizeH: this.sizeH,\n            sizeW: this.sizeW,\n            history: [],\n            isGameEnded: false,\n            winner: null,\n            isBackendConnected: false,\n            playerTeam: 1,\n        };\n        this.handleCellClick = this.handleCellClick.bind(this);\n        this.handleRollBack = this.handleRollBack.bind(this);\n    }\n\n    componentDidMount() {\n        if (this.props.type === 'ai') {\n            this.setUpSocket('wss://'+SERVER_URL+'/ws/ai/' + this.props.aiType + '/');\n        }\n        this.timeouts = [];\n        // if online\n    }\n\n    setUpSocket = (url)=> {\n        console.log('connecting to the backend');\n        this.socket = new WebSocket(url);\n        this.socket.onopen = () => {\n            this.setState({isBackendConnected: true});\n            console.log('backend connected')\n        };\n        this.socket.onmessage = (msg) => {\n            this.handleReceivedMove(JSON.parse(msg.data));\n        };\n        this.socket.onclose = (msg) => {\n            console.log('Cant connect to the server with code:',msg.code,  'retrying in two secconds');\n            this.setState({isBackendConnected: false});\n            this.timeouts.push(setTimeout(()=>{this.setUpSocket(url)}, 2000))\n        };\n    };\n\n    componentWillUnmount() {\n        console.log('unmounting, closing socket');\n        if (this.socket) {\n            // remove reconnection logic before intentional socket termination.\n            this.socket.onclose = null;\n            this.socket.close()\n        }\n        this.timeouts.forEach(clearTimeout);\n    }\n\n    handleReceivedMove(data) {\n        if (this.state.toMove === this.state.playerTeam || this.state.isGameEnded) {\n            return;\n        }\n        let move = data.move;\n        if (move.length > this.state.stepsLeft) {\n            throw new Error(\"More moves than possible\");\n        }\n        move.forEach(async (step) => {\n            if (isStepValid(this.state, step[0], step[1])) {\n                await this.makeStep(step[0], step[1]);\n            }\n        })\n    }\n\n    handleRollBack = () => {\n        if (this.state.history.length === 0 || this.props.type !== 'offline') {\n            // Initial state. Nothing to roll back\n            return;\n        }\n        const history = this.state.history.slice();\n        const field = this.state.field.slice();\n        let toMove = this.state.toMove;\n        let stepsLeft = this.state.stepsLeft + 1;\n        let isGameEnded = this.state.isGameEnded;\n        let winner = this.state.winner;\n\n        const move = history.pop();\n        const currState = field[move[0] * this.sizeW + move[1]]; // Hope it is not 0 (that would cause an error, but should be impossible)\n        // Next state is 1 for -2 and 0 for (1, -1) so it is opposite sign and smaller modulo\n        field[move[0] * this.sizeW + move[1]] = -Math.sign(currState) * (Math.abs(currState) - 1);\n\n        if (stepsLeft > 3) {\n            // We tried to roll back when stepsLeft ==  3 --> after roll back different team moves and has last move.\n            toMove = -toMove;\n            stepsLeft = 1;\n            // in this case we may have game end in place.\n            if (isGameEnded) {\n                isGameEnded = false;\n                winner = null;\n            }\n        }\n\n        this.setState({\n            field: field,\n            toMove: toMove,\n            stepsLeft: stepsLeft,\n            history: history,\n            isGameEnded: isGameEnded,\n            winner: winner,\n        })\n    };\n\n    handleCellClick = (h, w) => {\n        const playerCantMoveNow = this.state.toMove !== this.state.playerTeam && this.props.type !== 'offline';\n        if (playerCantMoveNow || this.state.isGameEnded || !isStepValid(this.state, h, w)) {\n            return;\n        }\n        this.makeStep(h, w).then(this.sendStateIfNeeded.bind(this));\n    };\n\n\n    makeStep(h, w) {\n        const field = this.state.field.slice();\n        const history = this.state.history.slice();\n        let stepsLeft = this.state.stepsLeft - 1;\n        let toMove = this.state.toMove;\n\n        let winner = this.state.winner;\n        let isGameEnded = this.state.isGameEnded;\n\n\n        field[h * this.sizeW + w] = getNextState(field[h * this.sizeW + w], this.state.toMove);\n        history.push([h, w]);\n\n        // Switch move\n        if (stepsLeft === 0) {\n            toMove = -toMove;\n            stepsLeft = 3;\n\n            //check  if game ended:\n            let new_state = {... this.state};\n            new_state.field = field.slice();\n            new_state.history = history.slice();\n            new_state.stepsLeft = stepsLeft;\n            new_state.toMove = toMove;\n\n            if (!isValidMoveExists(new_state)){\n                //end game\n                isGameEnded = true;\n                winner = - toMove\n            }\n        }\n\n        return new Promise((resolve) => {\n            this.setState({\n                toMove: toMove,\n                field: field,\n                stepsLeft: stepsLeft,\n                history: history,\n                isGameEnded: isGameEnded,\n                winner: winner,\n            }, resolve);\n        });\n    }\n\n    sendStateIfNeeded() {\n        //  don't call it on invalid or not on time moves.\n        const aiMoves = this.props.type === 'ai' && this.state.playerTeam !== this.state.toMove;\n        const onlineGame = this.props.type === 'online';\n        if ((aiMoves && !this.state.isGameEnded) || onlineGame) {\n            if (this.state.isBackendConnected){\n                this.socket.send(JSON.stringify(this.state));\n                console.log('state sent')\n            }else{\n                console.log('state not sent, retrying in two seconds');\n                this.timeouts.push(setTimeout(()=>{this.sendStateIfNeeded()}, 2000))\n            }\n        }\n    }\n\n    render() {\n        return (\n            <div className=\"container is-fluid game-container\">\n\n                <div className=\"tile is-ancestor\">\n                    <div className=\"tile is-parent is-8\">\n                        <div className=\"tile is-child is-game-tile\">\n                            <Field sizeH={this.sizeH} sizeW={this.sizeW} onCellClick={this.handleCellClick}\n                                   field={this.state.field}/>\n                        </div>\n                    </div>\n                    <div className=\"tile is-parent\">\n                        <div className=\"tile is-child is-info-bar \">\n                            <InfoBar onMenuClick={this.props.onMenuClick} onRollBack={this.handleRollBack}\n                                     gameState={this.state} type={this.props.type}/>\n\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n        )\n    }\n}\n\nexport default Game","import React from \"react\";\n\n\nclass Rules extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            currentSlide: 1,\n            data: {\n                1: {\n                    imgSrc: \"/img/rules/1.png\",\n                    element: <div className=\"rules-text content\">\n                        <ul>\n                            <li>Two players play on square grid.</li>\n                            <li>Each player can make 3 steps on a cell near his active dots (viruses) during his turn.\n                            </li>\n                        </ul>\n                    </div>\n                },\n                2: {\n                    imgSrc: \"/img/rules/2.png\",\n                    element: <div className=\"rules-text content\">\n                        <ul>\n                            <li>If you make a step on opponents virus, you create a base.</li>\n                            <li>Each base can either be active or inactive.</li>\n                        </ul>\n                    </div>\n                },\n                3: {\n                    imgSrc: \"/img/rules/3.png\",\n                    element: <div className=\"rules-text content\">\n                        <ul>\n                            <li>Any base, that have a virus or <b>active</b> base near it is active.</li>\n                        </ul>\n                    </div>\n                },\n                4: {\n                    imgSrc: \"/img/rules/4.png\",\n                    element: <content className=\"rules-text content\">\n                        <ul>\n                            <li>You can make steps on cells that are near viruses, or active bases.</li>\n                            <li>Inactive bases can not produce viruses.</li>\n                        </ul>\n                    </content>\n                },\n                5: {\n                    imgSrc: \"/img/rules/5.png\",\n                    element: <div className=\"rules-text content\">\n                        <ul>\n                            <li>Player that can not make a legal 3-step move loses.</li>\n                            <li>That's it! What the winning move for white would be here?</li>\n                        </ul>\n                    </div>\n                }\n\n            }\n        };\n\n        this.onNext = this.onNext.bind(this);\n        this.onPrev = this.onPrev.bind(this);\n    }\n\n    onNext = () => {\n        if (this.state.currentSlide === Object.keys(this.state.data).length) {\n            return\n        }\n        this.setState({currentSlide: this.state.currentSlide + 1})\n    };\n\n    onPrev = () => {\n        if (this.state.currentSlide === 1) {\n            return\n        }\n        this.setState({currentSlide: this.state.currentSlide - 1})\n    };\n\n    render() {\n        return (<div>\n            <div className=\"has-text-centered rules-title is-bold\">Rules</div>\n            <div className=\"container\">\n                <div className=\"columns\">\n                    <div className=\"column is-5-tablet rules-image\">\n                        <img src={this.state.data[this.state.currentSlide].imgSrc} alt=\"screen shot\"/>\n                    </div>\n                    <div className=\"column rules-text\">\n                        {this.state.data[this.state.currentSlide].element}\n                    </div>\n                </div>\n            </div>\n            <div disabled={this.state.currentSlide === Object.keys(this.state.data).length}\n                    className=\"button rules-button rules-next-button button-on-danger\"\n                    onClick={this.onNext}> Next\n            </div>\n            <div disabled={this.state.currentSlide === 1}\n                    className=\"button rules-button rules-prev-button button-on-danger\"\n                    onClick={this.onPrev}> Previous\n            </div>\n            <div className=\"button rules-button rules-back-button button-on-danger\"\n                    onClick={this.props.onCloseClick}>Close\n            </div>\n        </div>)\n    }\n}\n\nexport default Rules","import React from \"react\";\n\nclass OnlineModal extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n        return (<div className=\"container\">\n            <div className=\"tile is-ancestor\">\n                <div className=\"tile is-parent\">\n                    <div className=\"tile is-child notification\">\n                        Create room\n                    </div>\n                </div>\n                <div className=\"tile is-parent\">\n\n                    <div className=\"tile is-child notification\">\n                        Join room\n                    </div>\n\n                </div>\n            </div>\n\n\n        </div>)\n    }\n}\n\nexport default OnlineModal","import React from \"react\";\nimport ReactModal from \"react-modal\"\nimport Rules from \"./Rules\"\nimport OnlineModal from \"./OnlineModal\"\n\nconst EASY_AI_ENABLED = process.env?.REACT_APP_EASY_AI_ENABLED ?? false;\nconst MEDIUM_AI_ENABLED = process.env?.REACT_APP_MEDIUM_AI_ENABLED ?? false;\nconst HARD_AI_ENABLED = process.env?.REACT_APP_HARD_AI_ENABLED ?? false;\n\nReactModal.setAppElement('#root');\n\nclass Menu extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.handleToggleRules = this.handleToggleRules.bind(this);\n        this.handleToggleOnline = this.handleToggleOnline.bind(this);\n        this.state = {\n            showRules: false,\n            showOnline: false\n        }\n\n    }\n    handleToggleRules () {\n        this.setState({ showRules: !this.state.showRules });\n    }\n    handleToggleOnline () {\n        this.setState({ showOnline: !this.state.showOnline });\n    }\n\n    render() {\n        return (\n\n            <div className=\"container is-fluid menu-hero\">\n                <div className=\"tile is-ancestor\">\n                    <div className='tile is-parent'>\n                        <div className=\"tile is-parent is-12\">\n                            <div className=\"tile is-child notification is-game-title\">\n                                <div className=\"has-text-centered\">\n                                    <div className=\"title\">Virus War Game</div>\n                                    <div className=\"subtitle\">Two-player game with easy rules and deep strategy</div>\n\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                <div className=\"title is-ancestor\">\n                    <div className=\"tile\">\n                        <div className=\"tile is-parent \">\n                            <article className=\"tile is-child notification is-danger\">\n                                <div className=\"has-text-centered\">\n                                    <div className=\"title\">Read Rules</div>\n                                </div>\n                                <div className=\"button menu-button button-on-danger\" onClick={this.handleToggleRules}><span role=\"img\" aria-label=\"book\">📖</span> Rules</div>\n                            </article>\n                        </div>\n\n                        <div className=\"tile is-parent \">\n\n                            <article className=\"tile is-child notification is-warning\">\n                                <div className=\"has-text-centered\">\n                                    <div className=\"title\">Play With AI</div>\n                                </div>\n                                { EASY_AI_ENABLED ? <div className=\"button menu-button button-on-warning\" onClick={this.props.onNavigationClick.bind(this, 'easy')}><span role=\"img\" aria-label=\"easy\">👶</span> Tony</div> : <div/>}\n                                { MEDIUM_AI_ENABLED ? <div className=\"button menu-button button-on-warning\" onClick={this.props.onNavigationClick.bind(this, 'medium')} ><span role=\"img\" aria-label=\"medium\">🤓</span> Jessie</div>: <div/>}\n                                { HARD_AI_ENABLED ? <div className=\"button menu-button button-on-warning\" onClick={this.props.onNavigationClick.bind(this, 'hard')} ><span role=\"img\"  aria-label=\"hard\">🤖</span> Max</div>: <div/>}\n                                { !EASY_AI_ENABLED && !MEDIUM_AI_ENABLED && !HARD_AI_ENABLED ? <div className=\"label\"> <br/>No AI backends are enabled at the moment :(</div>:<div/>}\n                            </article>\n                        </div>\n                        <div className=\"tile is-parent \">\n\n                            <article className=\"tile is-child notification is-info\">\n                                <div className=\"has-text-centered\">\n                                    <div className=\"title\">Play With a Friend</div>\n                                </div>\n                                <div className=\"button menu-button button-on-info\" onClick={this.props.onNavigationClick.bind(this, 'offline')}><span role=\"img\" aria-label=\"offline\">🤜🤛</span>‍ Offline</div>\n                                {/*<div className=\"button menu-button button-on-info\" onClick={this.handleToggleOnline}><span role=\"img\" aria-label=\"online\">🎮</span> Online</div>*/}\n                            </article>\n                        </div>\n                    </div>\n                </div>\n\n                <ReactModal\n                    isOpen={this.state.showRules}\n                    onRequestClose={this.handleToggleRules}\n                    className=\"rules-modal\"\n                    overlayClassName=\"overlay\"\n                    shouldFocusAfterRender={false}\n                >\n                    <Rules onCloseClick={this.handleToggleRules}/>\n\n                </ReactModal>\n                <ReactModal\n                    isOpen={this.state.showOnline}\n                    onRequestClose={this.handleToggleOnline}\n                    className=\"rules-modal\"\n                    overlayClassName=\"overlay\"\n                    shouldFocusAfterRender={false}\n                >\n                    <OnlineModal onCloseClick={this.handleToggleOnline} createRoom={this.handleToggleOnline} joinRoom={this.handleToggleOnline}/>\n\n                </ReactModal>\n            </div>\n        )\n    }\n}\n\nexport default Menu","import React from \"react\";\n\nclass Footer extends React.Component {\n\n    render() {\n        return (\n            <footer className=\"footer my-footer\">\n                <div className=\"content has-text-centered\">\n                    <p>\n                        Created by <a href=\"https://nkorobkov.com\">Nikita Korobkov</a>. Code is licensed under\n                        <a href=\"http://opensource.org/licenses/mit-license.php\"> MIT</a> license.\n                    </p>\n                    <p>\n                        <a href=\"https://github.com/nkorobkov/virus-frontend\">Source Frontend</a> ||\n                        <a href=\"https://github.com/nkorobkov/virus-game\"> Source Backend</a> ||\n                        <a href=\"https://nkorobkov.com/projects/virus\"> Project Description</a>\n                    </p>\n\n                    {/*<p>*/}\n                        {/*Share:*/}\n                        {/*<a href=\"https://github.com/nkorobkov/virus-frontend\">Facebook</a> ||*/}\n                        {/*<a href=\"https://github.com/nkorobkov/virus-game\"> Twitter</a> ||*/}\n                        {/*<a href=\"https://nkorobkov.com/projects/virus\"> Mail</a>*/}\n                    {/*</p>*/}\n                </div>\n            </footer>\n        )\n    }\n}\n\nexport default Footer","import React from 'react';\nimport Game from './components/Game';\nimport Menu from './components/Menu';\nimport Footer from './components/Footer';\n\nclass App extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {activePage: 'menu'};\n        this.handleMenuClick = this.handleMenuClick.bind(this);\n        this.handleNavigation = this.handleNavigation.bind(this)\n\n    }\n\n    handleNavigation = (page) => {\n        this.setState({activePage: page});\n    };\n\n    handleMenuClick = () => {\n        this.setState({activePage: 'menu'});\n    };\n\n    render() {\n        const activePage = this.state.activePage;\n        let element;\n        switch (activePage) {\n            case 'menu':\n                element = <Menu onNavigationClick={this.handleNavigation}/>;\n                break;\n            case 'easy':\n                element = <Game type='ai' aiType='easy' onMenuClick={this.handleMenuClick}/>;\n                break;\n            case 'medium':\n                element = <Game type='ai' aiType='medium' onMenuClick={this.handleMenuClick}/>;\n                break;\n            case 'hard':\n                element = <Game type='ai' aiType='hard' onMenuClick={this.handleMenuClick}/>;\n                break;\n            case 'offline':\n                element = <Game type='offline' onMenuClick={this.handleMenuClick}/>;\n                break;\n            default:\n                element = <Menu onNavigationClick={this.handleNavigation}/>;\n                break;\n        }\n        return (\n            <div>\n                {element}\n                <Footer/>\n            </div>\n        )\n    }\n}\n\nexport default App","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}